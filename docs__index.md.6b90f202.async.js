"use strict";(self.webpackChunkawaitable_modal=self.webpackChunkawaitable_modal||[]).push([[935,526],{89258:function(l,d,e){e.r(d);var n=e(73230),m=e(45739),c=e(39868),x=e(86606),h=e(44610),t=e(82042),s=e(7598),b=e(351),I=e(87651),v=e(27040),j=e(52383),E=e(88835),p=e(13702),o=e(55368),i=e(582),r=e(75271),a=e(22009),_=e(52676);function u(){return(0,_.jsx)(o.dY,{children:(0,_.jsx)(r.Suspense,{fallback:(0,_.jsx)(i.Z,{}),children:(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"markdown",children:[(0,_.jsxs)("h1",{id:"awaitable-modal",children:[(0,_.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#awaitable-modal",children:(0,_.jsx)("span",{className:"icon icon-link"})}),"awaitable-modal"]}),(0,_.jsxs)("p",{children:[a.texts[0].value,(0,_.jsx)("code",{children:a.texts[1].value}),a.texts[2].value]}),(0,_.jsxs)("h2",{id:"\u4E3A\u4EC0\u4E48\u9700\u8981-awaitable-modal",children:[(0,_.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4E3A\u4EC0\u4E48\u9700\u8981-awaitable-modal",children:(0,_.jsx)("span",{className:"icon icon-link"})}),"\u4E3A\u4EC0\u4E48\u9700\u8981 awaitable-modal\uFF1F"]}),(0,_.jsxs)("h3",{id:"\u4F20\u7EDF-modal-\u7684\u75DB\u70B9",children:[(0,_.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u4F20\u7EDF-modal-\u7684\u75DB\u70B9",children:(0,_.jsx)("span",{className:"icon icon-link"})}),"\u4F20\u7EDF Modal \u7684\u75DB\u70B9"]}),(0,_.jsx)("p",{children:a.texts[3].value}),(0,_.jsx)(t.Z,{lang:"tsx",children:a.texts[4].value}),(0,_.jsxs)("h3",{id:"awaitable-modal-\u7684\u4F18\u52BF",children:[(0,_.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#awaitable-modal-\u7684\u4F18\u52BF",children:(0,_.jsx)("span",{className:"icon icon-link"})}),"awaitable-modal \u7684\u4F18\u52BF"]}),(0,_.jsx)("p",{children:a.texts[5].value}),(0,_.jsx)(t.Z,{lang:"tsx",children:a.texts[6].value}),(0,_.jsxs)("h3",{id:"\u5BF9\u6BD4\u603B\u7ED3",children:[(0,_.jsx)("a",{"aria-hidden":"true",tabIndex:"-1",href:"#\u5BF9\u6BD4\u603B\u7ED3",children:(0,_.jsx)("span",{className:"icon icon-link"})}),"\u5BF9\u6BD4\u603B\u7ED3"]}),(0,_.jsxs)(s.Z,{children:[(0,_.jsx)("thead",{children:(0,_.jsxs)("tr",{children:[(0,_.jsx)("th",{children:a.texts[7].value}),(0,_.jsx)("th",{children:a.texts[8].value}),(0,_.jsx)("th",{children:a.texts[9].value})]})}),(0,_.jsxs)("tbody",{children:[(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:a.texts[10].value}),(0,_.jsx)("td",{children:a.texts[11].value}),(0,_.jsx)("td",{children:a.texts[12].value})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:a.texts[13].value}),(0,_.jsx)("td",{children:a.texts[14].value}),(0,_.jsx)("td",{children:a.texts[15].value})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:a.texts[16].value}),(0,_.jsx)("td",{children:a.texts[17].value}),(0,_.jsx)("td",{children:a.texts[18].value})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:a.texts[19].value}),(0,_.jsx)("td",{children:a.texts[20].value}),(0,_.jsx)("td",{children:a.texts[21].value})]}),(0,_.jsxs)("tr",{children:[(0,_.jsx)("td",{children:a.texts[22].value}),(0,_.jsx)("td",{children:a.texts[23].value}),(0,_.jsx)("td",{children:a.texts[24].value})]})]})]})]})})})})}d.default=u},42403:function(l,d,e){e.d(d,{Z:function(){return n.Z}});var n=e(67241)},22009:function(l,d,e){e.r(d),e.d(d,{texts:function(){return n}});const n=[{value:"\u4E00\u4E2A\u5C06 React \u6A21\u6001\u6846\u64CD\u4F5C Promise \u5316\u7684\u8F7B\u91CF\u7EA7\u5DE5\u5177\u5E93\uFF0C\u8BA9\u4F60\u53EF\u4EE5\u4F7F\u7528 ",paraId:0,tocIndex:0},{value:"async/await",paraId:0,tocIndex:0},{value:" \u8BED\u6CD5\u4F18\u96C5\u5730\u5904\u7406\u6A21\u6001\u6846\u4EA4\u4E92\u3002",paraId:0,tocIndex:0},{value:"\u5728\u4F20\u7EDF\u7684 Modal \u4F7F\u7528\u65B9\u5F0F\u4E2D\uFF0C\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u56DE\u8C03\u51FD\u6570\u6765\u5904\u7406\u7528\u6237\u7684\u64CD\u4F5C\uFF0C\u8FD9\u5BFC\u81F4\u4EE3\u7801\u903B\u8F91\u5206\u6563\uFF0C\u96BE\u4EE5\u7EF4\u62A4\uFF1A",paraId:1,tocIndex:2},{value:`// \u274C \u4F20\u7EDF\u65B9\u5F0F\uFF1A\u4EE3\u7801\u903B\u8F91\u5206\u6563\uFF0C\u96BE\u4EE5\u9605\u8BFB
function TraditionalWay() {
  const [visible, setVisible] = useState(false);

  // \u70B9\u51FB\u6309\u94AE\u7684\u903B\u8F91
  const handleClick = () => {
    setVisible(true);
  };

  // \u786E\u8BA4\u7684\u56DE\u8C03\u903B\u8F91 - \u5206\u6563\u5728\u53E6\u4E00\u4E2A\u5730\u65B9
  const handleOk = async (formData) => {
    try {
      // \u7EE7\u7EED\u540E\u7EED\u64CD\u4F5C...
    } catch (error) {
      message.error('\u63D0\u4EA4\u5931\u8D25');
    } finally {
      setVisible(false);
    }
  };

  // \u53D6\u6D88\u7684\u56DE\u8C03\u903B\u8F91 - \u53C8\u5728\u53E6\u4E00\u4E2A\u5730\u65B9
  const handleCancel = () => {
    setVisible(false);
    // \u53D6\u6D88\u540E\u7684\u5904\u7406...
  };

  return (
    <>
      <Button onClick={handleClick}>\u6253\u5F00\u5F39\u7A97</Button>
      <Modal
        visible={visible}
        onOk={handleOk}
        onCancel={handleCancel}
      >
        <Form />
      </Modal>
    </>
  );
}
`,paraId:2,tocIndex:2},{value:"\u4F7F\u7528 awaitable-modal\uFF0C\u4EE3\u7801\u903B\u8F91\u96C6\u4E2D\u5728\u4E00\u5904\uFF0C\u6E05\u6670\u6613\u61C2\uFF1A",paraId:3,tocIndex:3},{value:`import { asyncModal } from 'awaitable-modal'

// \u2705 awaitable-modal \u65B9\u5F0F\uFF1A\u903B\u8F91\u96C6\u4E2D\uFF0C\u4EE3\u7801\u6E05\u6670
function AsyncModalWay () {
  const handleClick = async () => {
    try {
      // \u5F39\u7A97\u903B\u8F91\u3001\u786E\u8BA4\u903B\u8F91\u3001\u540E\u7EED\u5904\u7406\u90FD\u5728\u4E00\u8D77, FormModal \u4E2D\u9700\u8981\u63D0\u4F9B onOk\\onCancel \u56DE\u8C03\u5904\u7406
      const formData = await asyncModal(FormModal, { title: '\u586B\u5199\u8868\u5355' })

      // \u7528\u6237\u70B9\u51FB\u786E\u8BA4\u540E\u624D\u4F1A\u6267\u884C\u5230\u8FD9\u91CC
      await api.submit(formData)
      message.success('\u63D0\u4EA4\u6210\u529F')

      // \u7EE7\u7EED\u540E\u7EED\u64CD\u4F5C

    } catch (error) {
      // \u7528\u6237\u70B9\u51FB\u53D6\u6D88\u6216\u53D1\u751F\u9519\u8BEF\u90FD\u4F1A\u8FDB\u5165\u8FD9\u91CC
      if (error instanceof AsyncModalCancelError) {
        console.log('\u7528\u6237\u53D6\u6D88\u4E86\u64CD\u4F5C')
      } else {
        message.error('\u63D0\u4EA4\u5931\u8D25')
      }
    }
  }

  return <Button onClick={handleClick}>\u6253\u5F00\u5F39\u7A97</Button>\uFF1B
}
`,paraId:4,tocIndex:3},{value:"\u7279\u6027",paraId:5,tocIndex:4},{value:"\u4F20\u7EDF Modal",paraId:5,tocIndex:4},{value:"awaitable-modal",paraId:5,tocIndex:4},{value:"\u4EE3\u7801\u7EC4\u7EC7",paraId:5,tocIndex:4},{value:"\u56DE\u8C03\u51FD\u6570\u5206\u6563\u5728\u591A\u5904",paraId:5,tocIndex:4},{value:"async/await \u96C6\u4E2D\u5904\u7406",paraId:5,tocIndex:4},{value:"\u53EF\u8BFB\u6027",paraId:5,tocIndex:4},{value:"\u9700\u8981\u8DF3\u8F6C\u67E5\u770B\u4E0D\u540C\u56DE\u8C03",paraId:5,tocIndex:4},{value:"\u4ECE\u4E0A\u5230\u4E0B\u7EBF\u6027\u9605\u8BFB",paraId:5,tocIndex:4},{value:"\u6D41\u7A0B\u63A7\u5236",paraId:5,tocIndex:4},{value:"\u9700\u8981\u72B6\u6001\u7BA1\u7406",paraId:5,tocIndex:4},{value:"Promise \u81EA\u7136\u6D41\u8F6C",paraId:5,tocIndex:4},{value:"\u9519\u8BEF\u5904\u7406",paraId:5,tocIndex:4},{value:"\u5206\u6563\u5728\u5404\u4E2A\u56DE\u8C03",paraId:5,tocIndex:4},{value:"try/catch \u7EDF\u4E00\u5904\u7406",paraId:5,tocIndex:4},{value:"\u5F02\u6B65\u64CD\u4F5C",paraId:5,tocIndex:4},{value:"\u56DE\u8C03\u5D4C\u5957",paraId:5,tocIndex:4},{value:"async/await \u6241\u5E73\u5316",paraId:5,tocIndex:4}]}}]);
